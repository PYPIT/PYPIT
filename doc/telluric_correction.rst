.. highlight:: rest

***************************
Telluric Correct 1D Spectra
****************************

This document will describe how to telluric correct 1D spectra.

The telluric correction happens in 1D and outside the data 
reduction pipeline. We recommend to telluric correct your
coadded data.

IMPORTANT: The telluric correction only works for the LRIS 
600/10000 grating on the Keck telescope. 


The Method
++++++++++++

For the telluric correction we follow the procedure 
described in van Dokkum & Conroy 2012. We take a 
model atmosphere transmission spectra generated by the 
ESO Sky Calc tool for Maunakea and scale it until it 
best matches the data over a region of the spectrum that 
is mostly populated by telluric absoprtion features and 
not spectral features.


Input File
++++++++++

The primary script is called `pypit_tc_1dspec` and takes
an input YAML file to guide the process.

The YAML file has the following fields::
    'filenames': {'name.fits': <exten>} 
    'grating': '600/10000'
    'transmission': 'maunakea_atm_tran.dat'
    'region': [9250, 9650]

If region is not included or doesn't have a value, default 
values will be used. 

Once you have the YAML file set up, you can 
telluric correct your 1D spectra by running the command::

    pypit_tc_1dspec name_of_yaml_file.yaml
